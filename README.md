<br>
<br>

# **Webserv (2022.03 - 2022.06)*

<br>
<br>

> ## 프로젝트 소개

###      
### 목표

인터넷에서 가장 많이 사용되는 프로토콜 중 하나인 HTTP를 직접 구현해 나만의 HTTP 서버를 만들어내는 것이 프로젝트의 목표입니다. 프로젝트는 3명의 팀원으로 구성되었으며, 다음과 같은 제약사항 하에 진행했습니다.

-   서버에 대한 요청이 영원히 중단되어서는 안됨
-   nginx와 같이 http 1.1을 준수해야 함
-   완전 정적 웹사이트를 서비스해야 함
-   get, post delete method가 동작해야 함
-   cgi가 동작해야함


### 결과

조회가 가능한 실제 브라우저
Postman을 사용한 CREATE, READ, DELETE 기능

<br>

<br>
<br>


> ## 사용 기술 스택

C++, Slack, github
<br>

<br>
<br>

> ## 트러블 슈팅


### 문제 상황

siege test 시 구현한 서버에 조회 요청이 16000번을 초과하는 경우, client가 고장이나 siege종료가 되는 현상이 발생


### 원인 파악 및 해결방법 모색

1.   graceful shutdown이 되지 않는다는 가정
2.   linger라는 구조체를 사용할지 , usleep을 사용할지 의논
     -   4-way handshake를 고려할 경우  step3 에서 close 준비가 된 후 server가 client(test)에게 fin flag를 전송
     -   step4에서 client는 해지 준비가 되었는 ack를 server에게 보내주고 client는 TIME-WAIT 상태로 변경
3.    client의 time-wait 상태에서 정상 상태로 돌아오기를 기다릴 수 있도록 조치하기로 결정


### 해결

조회 요청이 종료됐을 시 usleep을 통해 서버에 딜레이를 줌으로써, client의 time-wait 상태에서 정상상태로 돌아오는 것 확인!
<br>

<br>

<br>


> ## 배운 점 & 아쉬운 점


### 배운점

-   rfc를 비롯한 공식문서와, "tcp/ip 소켓 프로그래밍"을 비롯한 도서 등 문서자료를 독학해 웹서버의 구조와 동작 방식에 대해 파악
-   문제 발생 시 팀원들과 함께 단계별로 문제를 파악하고, 모두가 합의할 수 있는 해결점을 모색하는 방법을 경험


### 아쉬운점

-   아키텍쳐 패턴에 대한 지식을 습득하기 전에 프로젝트를 진행해, 객체별 멤버변수 및 멤버 함수의 분배가 적절하지 못해, 객체지향적 프로그래밍에 적합하지 못한 코드를 작성

-   웹에 대한 개념이 생소해 구조 설계가 미숙했고, 이로 인해 프로젝트 구현에 시간이 예상보다 많이 소요됨

<br>
